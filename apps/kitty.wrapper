#!/bin/bash
set -eux

HOURS=$(date +%-H)
if [[ "$HOURS" -lt "${DAYSTART:-8}" ]] || [[ "$HOURS" -ge "${NIGHTSTART:-22}" ]]; then
    echo je noc
	kitty +kitten themes --reload-in=all Dark
else
    echo je den
	kitty +kitten themes --reload-in=all Light
fi

PID="$(xdotool getwindowfocus getwindowpid 2> /dev/null)"

if [[ "$(ps -p "$PID" -o comm --no-headers)" = kitty ]]; then
    kitty @ --to unix:@mykitty-"$PID" launch --type os-window --cwd current "$@"
else
    kitty "$@"
fi
